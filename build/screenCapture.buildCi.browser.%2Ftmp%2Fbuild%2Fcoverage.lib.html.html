<html lang="en"><head>
    <title>Code coverage report for node-npmtest-custom-error-generator/node_modules/custom-error-generator/error.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-custom-error-generator">npmtest-custom-error-generator (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-custom-error-generator/node_modules/custom-error-generator/error.js</span></h1>
    <h2>
        
        Statements: <span class="metric">7.41% <small>(4 / 54)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 22)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 10)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">7.41% <small>(4 / 54)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../index.html">All files</a> » <a href="index.html">node-npmtest-custom-error-generator/node_modules/custom-error-generator/</a> » error.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tbody><tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">"use strict";
var util = require('util');
/**
 * Create a custom error generator
 *
 * @param   {String}    name        The error name
 * @param   {Object}    parameters  An optional set of key=value pairs to attach to errors
 * @param   {Function}  Constructor      An optional parent Error class to inherit from
 * @return  {Function}
 */
module.exports = <span class="fstat-no" title="function not covered">function createError (name, parameters, Constructor) {</span>
<span class="cstat-no" title="statement not covered">    if (!name) {</span>
<span class="cstat-no" title="statement not covered">        throw new TypeError('A custom error name is required');</span>
    }
    // Check to make sure we're inheriting from a regular function first
<span class="cstat-no" title="statement not covered">    if (Constructor &amp;&amp; typeof Constructor == 'function') {</span>
        // If we're not starting from the Error prototype, add the Error prototype
        // to the Constructor prototype chain
<span class="cstat-no" title="statement not covered">        if (!Error.prototype.isPrototypeOf(Constructor.prototype)) {</span>
<span class="cstat-no" title="statement not covered">            var parentProto = { };</span>
<span class="cstat-no" title="statement not covered">            Object.getOwnPropertyNames(Constructor.prototype).forEach(<span class="fstat-no" title="function not covered">function (name) {</span></span>
<span class="cstat-no" title="statement not covered">                parentProto[name] = Object.getOwnPropertyDescriptor(Constructor.prototype, name);</span>
            });
<span class="cstat-no" title="statement not covered">            Constructor.prototype = Object.create(Error.prototype, parentProto);</span>
        }
    // Otherwise simply inherit from the Error built-in
    } else {
<span class="cstat-no" title="statement not covered">        Constructor = Error;</span>
    }
    // If we're given additional parameters, attach them to the created object
<span class="cstat-no" title="statement not covered">    var properties = {};</span>
<span class="cstat-no" title="statement not covered">    if (parameters) {</span>
<span class="cstat-no" title="statement not covered">        Object.keys(parameters).forEach(<span class="fstat-no" title="function not covered">function (property) {</span></span>
<span class="cstat-no" title="statement not covered">            properties[property] = {</span>
                'value'        : parameters[property],
                'enumerable'   : true,
                'writable'     : true,
                'configurable' : true
            };
        });
    }
    // Set up the custom properties for this Error object, if specified.
    // Create a new stack descriptor that includes the stacks for any errors
    // also passed in
<span class="fstat-no" title="function not covered">    function createStackDescriptor (errors, previous) {</span>
<span class="cstat-no" title="statement not covered">        return <span class="fstat-no" title="function not covered">function () {</span></span>
<span class="cstat-no" title="statement not covered">            var stack = previous.get();</span>
<span class="cstat-no" title="statement not covered">            errors.forEach(<span class="fstat-no" title="function not covered">function (error) {</span></span>
<span class="cstat-no" title="statement not covered">                stack += '\n';</span>
<span class="cstat-no" title="statement not covered">                stack += error.stack;</span>
            });
<span class="cstat-no" title="statement not covered">            return stack;</span>
        };
    }
    // The custom error function that's returned. Since it always creates a new
    // exception, we don't have to worry if itself was invoked with a new
    // operator or not.
<span class="fstat-no" title="function not covered">    function CustomError (message) {</span>
        // We start by simply creating a new error object, so that we preserve
        // the runtime error logic
<span class="cstat-no" title="statement not covered">        var proxy = new Error(message);</span>
        // We want to call our constructor on the error object itself,
<span class="cstat-no" title="statement not covered">        Constructor.apply(this, arguments);</span>
        // We also want to preserve the inheritance logic in the prototype chain
<span class="cstat-no" title="statement not covered">        Constructor.apply(proxy, arguments);</span>
        // Capture the stack trace at the appropriate stack location
<span class="cstat-no" title="statement not covered">        Error.captureStackTrace(proxy, CustomError);</span>
        // Make a backup of our existing stack descriptor
<span class="cstat-no" title="statement not covered">        var stackDescriptor = Object.getOwnPropertyDescriptor(proxy, 'stack');</span>
        // We now loop through all of the arguments to collect any sub errors,
        // And to allow for custom string formatting with the message
<span class="cstat-no" title="statement not covered">        var errors   = [];</span>
<span class="cstat-no" title="statement not covered">        var messages = [];</span>
<span class="cstat-no" title="statement not covered">        var length   = arguments.length;</span>
<span class="cstat-no" title="statement not covered">        var index    = length;</span>
<span class="cstat-no" title="statement not covered">        while (index--) {</span>
<span class="cstat-no" title="statement not covered">            var param = arguments[length - index - 1];</span>
<span class="cstat-no" title="statement not covered">            if (param instanceof Error) {</span>
<span class="cstat-no" title="statement not covered">                errors.push(param);</span>
            } else <span class="cstat-no" title="statement not covered">if (typeof param == 'string' || typeof param == 'number') {</span>
<span class="cstat-no" title="statement not covered">                messages.push(param);</span>
            }
        }
        // If we have any errors that were passed in, replace the stack
        // descriptor that includes the other error stacks
<span class="cstat-no" title="statement not covered">        if (errors.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered">            properties.stack = {</span>
                'get' : createStackDescriptor(errors, stackDescriptor)
            };
        }
        // Always set the message manually, in case there was a default supplied
        // format with util.format
<span class="cstat-no" title="statement not covered">        properties.message = {</span>
            'value' : util.format.apply(null, messages)
        };
        // Pass in our extra properties
<span class="cstat-no" title="statement not covered">        Object.defineProperties(proxy, properties);</span>
        // Replace the error prototype with our own
<span class="cstat-no" title="statement not covered">        proxy.__proto__ = Object.create(CustomError.prototype, properties);</span>
<span class="cstat-no" title="statement not covered">        return proxy;</span>
    }
    // Set up the new prototype
<span class="cstat-no" title="statement not covered">    var proto = {</span>
        'constructor'      : {
            'value'        : CustomError,
            'writable'     : true,
            'configurable' : true
        },
        'name'             : {
            'value'        : name,
            'enumerable'   : false,
            'writable'     : true,
            'configurable' : true
        },
        'toJSON'           : {
            'enumerable'   : false,
            'configurable' : false,
            'value'        : <span class="fstat-no" title="function not covered">function () {</span>
<span class="cstat-no" title="statement not covered">                var json =  {};</span>
<span class="cstat-no" title="statement not covered">                Object.getOwnPropertyNames(this).forEach(<span class="fstat-no" title="function not covered">function (name) {</span></span>
<span class="cstat-no" title="statement not covered">                    json[name] = name == 'stack' ? this[name].split('\n') : this[name];</span>
                }, this);
<span class="cstat-no" title="statement not covered">                return json;</span>
            }
        }
    };
    // Also set the passed in parameters on the prototype if it's inherited later
<span class="cstat-no" title="statement not covered">    if (parameters) {</span>
<span class="cstat-no" title="statement not covered">        Object.keys(parameters).forEach(<span class="fstat-no" title="function not covered">function (name) {</span></span>
<span class="cstat-no" title="statement not covered">            proto[name] = {</span>
                'value' : parameters[name],
                'enumerable'   : true,
                'writable'     : true,
                'configurable' : true
            };
        });
    }
    // Copying from the Error prototype allows us to preserve the built-in error checks
<span class="cstat-no" title="statement not covered">    CustomError.prototype = Object.create(Constructor.prototype, proto);</span>
<span class="cstat-no" title="statement not covered">    return CustomError;</span>
};
&nbsp;
&nbsp;</pre></td></tr>
</tbody></table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Wed Apr 19 2017 10:30:02 GMT+0000 (UTC)</div>
</div>


</body></html>